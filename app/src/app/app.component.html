<!-- App Shell with Material Toolbar and Sidenav -->
@if (isLoggedIn()) {
<mat-sidenav-container class="app-container">
  <!-- Sidenav for mobile -->
  <mat-sidenav #sidenav mode="over" [opened]="sidenavOpen()" (closed)="closeSidenav()" class="mobile-sidenav">
    <mat-nav-list>
      <a mat-list-item routerLink="/flights" routerLinkActive="active" (click)="closeSidenav()">
        <mat-icon matListItemIcon>flight</mat-icon>
        <span matListItemTitle>Flights</span>
      </a>
      <a mat-list-item routerLink="/anomalies" routerLinkActive="active" (click)="closeSidenav()">
        <mat-icon matListItemIcon>warning</mat-icon>
        <span matListItemTitle>Anomalies</span>
      </a>
      <a mat-list-item routerLink="/stats" routerLinkActive="active" (click)="closeSidenav()">
        <mat-icon matListItemIcon>bar_chart</mat-icon>
        <span matListItemTitle>Statistics</span>
      </a>
      <mat-divider></mat-divider>
      <a mat-list-item [routerLink]="['/import', 'pohl.rocks']" (click)="closeSidenav()">
        <mat-icon matListItemIcon>cloud_upload</mat-icon>
        <span matListItemTitle>Import Flights</span>
      </a>
      <a mat-list-item routerLink="/export" (click)="closeSidenav()">
        <mat-icon matListItemIcon>cloud_download</mat-icon>
        <span matListItemTitle>Export Flights</span>
      </a>
      <mat-divider></mat-divider>
      <a mat-list-item (click)="logout(); closeSidenav()">
        <mat-icon matListItemIcon>logout</mat-icon>
        <span matListItemTitle>Logout</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Main content area -->
  <mat-sidenav-content>
    <!-- Glass Toolbar -->
    <mat-toolbar class="glass-toolbar">
      <button mat-icon-button class="menu-button" (click)="toggleSidenav()">
        <mat-icon>menu</mat-icon>
      </button>

      <a routerLink="/" class="brand">
        <mat-icon>flight_takeoff</mat-icon>
        <span class="brand-text">Flight Tracker</span>
      </a>

      <span class="spacer"></span>

      <!-- Desktop navigation -->
      <nav class="desktop-nav">
        <a mat-button routerLink="/flights" routerLinkActive="active-link">
          <mat-icon>list</mat-icon>
          Flights
        </a>
        <a mat-button routerLink="/anomalies" routerLinkActive="active-link">
          <mat-icon>warning</mat-icon>
          Anomalies
        </a>
        <a mat-button routerLink="/stats" routerLinkActive="active-link">
          <mat-icon>bar_chart</mat-icon>
          Statistics
        </a>
        <a mat-button [routerLink]="['/import', 'pohl.rocks']">
          <mat-icon>cloud_upload</mat-icon>
          Import
        </a>
        <a mat-button routerLink="/export">
          <mat-icon>cloud_download</mat-icon>
          Export
        </a>
      </nav>

      <button mat-icon-button (click)="logout()" matTooltip="Logout">
        <mat-icon>logout</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Page content -->
    <main class="page-content">
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
} @else {
<!-- Welcome page for non-logged in users -->
<router-outlet></router-outlet>
}