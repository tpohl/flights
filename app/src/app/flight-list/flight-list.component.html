<div class="flight-list-container">
  <header class="page-header">
    <h2 class="page-title">Your Flights</h2>
    <button mat-fab extended color="primary" [routerLink]="['/flight', 'new']">
      <mat-icon>add</mat-icon>
      Add Flight
    </button>
  </header>

  <div class="main-content">
    <!-- Map Section -->
    <div class="map-section">
      <app-cesium *ngIf="flights()" [flights]="flights()" [showCountries]="mapOptions.countries"></app-cesium>
    </div>

    <!-- Stats Panel -->
    <aside class="stats-panel glass-panel">
      <h3 class="panel-title">Map Options</h3>
      <div class="option-row">
        <mat-slide-toggle [(ngModel)]="mapOptions.countries" color="primary">
          Show visited Countries
        </mat-slide-toggle>
      </div>

      <h3 class="panel-title">Statistics</h3>
      <div class="stat-item">
        <mat-icon>flight</mat-icon>
        <span class="stat-label">Flights</span>
        <span class="stat-value">{{ stats().count }}</span>
      </div>
      <div class="stat-item">
        <mat-icon>map</mat-icon>
        <span class="stat-label">Distance</span>
        <span class="stat-value">{{ stats().distance | number : '1.0-0' }} km</span>
      </div>
      <div class="stat-item">
        <mat-icon>schedule</mat-icon>
        <span class="stat-label">Duration</span>
        <span class="stat-value">{{ stats().totalTimeMilliseconds | amDurationExact }}</span>
      </div>
      <div class="stat-item">
        <mat-icon>place</mat-icon>
        <span class="stat-label">Airports</span>
        <span class="stat-value">{{ stats().airportsVisited.size() }}</span>
      </div>

      <button mat-flat-button color="primary" class="add-flight-btn" [routerLink]="['/flight', 'new']">
        <mat-icon>add</mat-icon>
        Add Flight
      </button>
    </aside>
  </div>

  <!-- Flight Cards Grid -->
  <section class="flights-grid">
    @for (flight of flights(); track flight._id) {
    <a [routerLink]="['/flight', flight._id]" class="flight-card-link">
      <mat-card class="flight-card glass-card" matRipple>
        <mat-card-content>
          <app-flight-tile [flight]="flight"></app-flight-tile>
        </mat-card-content>
      </mat-card>
    </a>
    }
  </section>
</div>